{% extends 'base.html.twig' %}

{% block title %}Grades
{% endblock %}

{% block body %}

	<div class="col-lg-12  contenu-blanc shadow-lg">

		<h1>Grades</h1>
		<table class="table table-striped table-advance table-hover">
			<thead>
				<tr class="bg-entete">
					<th class="col-md-1">Id</th>
					<th>user_id</th>
					<th>exam_id</th>
					<th>grade</th>
					<th>category_id</th>
					{% if is_granted('ROLE_ADMIN') %}
						<th class="col-md-6">Actions<span class="pull-right">
								<a href="{{ path('create_grade')}}" class="btn btn-primary btn-sm">
									<i class="fa fa-save"></i>
									Add a new grade</a>
							</span>
						</th>
					{% endif %}
				</tr>
				{% if button is defined %}
					<button type="submit" class="btn btn-primary">
						{{ button }}
					</button>
				{% endif %}
				<div class="container-fluid contenu">
					{% if not grades.items is same as ([]) %}
						{#in case theres no data yet#}
						There is
						{{ grades.getTotalItemCount }}
						grade!!
					</thead><br>
					<tbody>

						{% for key, grade in grades %}
							<tr>
								<td>{{ grade.id }}</td>
								<td>{{ grade.user.id }}</td>
								<td>{{ grade.exam.id }}</td>
								<td>{{ grade.grade }}</td>
								<td>{{ grade.category.id }}</td>


								<td
									class="row">

									<!-- formulaire pour demander la modification ou la suppression -->
									{% if is_granted('ROLE_ADMIN') %}
										<form>
											<button type="submit" class="btn btn-primary btn-sm" formaction="{{ path('edit_grade',{id : grade.id}) }}" title="Edit">
												<i title="Edit">
													<i class="fa fa-pencil"></i>
													Edit</button>
												<button type="submit" class="btn btn-danger btn-sm" formaction="{{ path('delete_grade',{id : grade.id}) }}" title="Supprimer" onclick="return confirm('Do you really want to delete this grade ?');">
													<i class="fa fa-trash-o "></i>
													delete</button>
												<input
												type="hidden" name="_token" value="{{ csrf_token('action-item' ~ grade.id) }}">
											{#  ~     pour concat√©ner des chaines en twig #}
											</form>
										{% endif %}
									</td>
								</td>
							</tr>
						{% endfor %}
					</tbody>

				</table>
				<div class="d-flex justify-content-center">
					{{ knp_pagination_render(grades) }}
				</div>
			{% else %}
				there is no grades yet
			{% endif %}
		</div>
	</div>
{% endblock %}
